"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var Aggregate=function(){function u(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=e.id,t=e.events,n=void 0===t?[]:t,s=e.version,a=void 0===s?0:s,i=e.snapshot,o=void 0===i?{}:i;_classCallCheck(this,u),this.id=r,this.version=a,Object.assign(this,o),this.applyEvents(n)}return _createClass(u,[{key:"applyEvents",value:function(e){var r=this;return(Array.isArray(e)?e:[e]).map(function(e){if(e.sequenceNumber&&e.sequenceNumber<=r.version)throw new Error("Event came out of sequence");return e.update(r),e.sequenceNumber=e.sequenceNumber||r.version+1,e.aggregateId=e.aggregateId||r.id,r.version=e.sequenceNumber,e})}}]),u}();exports.default=Aggregate;
//# sourceMappingURL=maps/aggregate.js.map
