"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),Aggregate=function(){function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=e.id,t=e.events,s=void 0===t?[]:t,a=e.version,i=void 0===a?0:a,u=e.snapshot,n=void 0===u?{}:u;(0,_classCallCheck2.default)(this,l),this.id=r,this.version=i,Object.assign(this,n),this.applyEvents(s)}return(0,_createClass2.default)(l,[{key:"applyEvents",value:function(e){var r=this;return(Array.isArray(e)?e:[e]).map(function(e){if(e.sequenceNumber&&e.sequenceNumber<=r.version)throw new Error("Event came out of sequence");return e.update(r),e.sequenceNumber=e.sequenceNumber||r.version+1,e.aggregateId=e.aggregateId||r.id,r.version=e.sequenceNumber,e})}}]),l}();exports.default=Aggregate;
//# sourceMappingURL=maps/aggregate.js.map
