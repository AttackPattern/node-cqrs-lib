"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var Aggregate=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.id,n=r.events,s=void 0===n?[]:n,a=r.version,i=void 0===a?0:a,o=r.snapshot,u=void 0===o?{}:o;_classCallCheck(this,e),this.id=t,this.version=i,Object.assign(this,u),this.applyEvents(s)}return _createClass(e,[{key:"applyEvents",value:function(e){var r=this;return(Array.isArray(e)?e:[e]).map(function(e){if(e.sequenceNumber&&e.sequenceNumber<=r.version)throw new Error("Event came out of sequence");return e.update(r),e.sequenceNumber=e.sequenceNumber||r.version+1,e.aggregateId=e.aggregateId||r.id,r.version=e.sequenceNumber,e})}}]),e}();exports.default=Aggregate;
//# sourceMappingURL=maps/aggregate.js.map
