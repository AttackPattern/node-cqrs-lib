"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=system;var _authorizationError=_interopRequireDefault(require("./authorizationError"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _asyncToGenerator(n){return function(){var t=this,r=arguments;return new Promise(function(o,u){var i=n.apply(t,r);function e(t,e){try{var r=i[t](e),n=r.value}catch(t){return void u(t)}r.done?o(n):Promise.resolve(n).then(c,a)}function c(t){e("next",t)}function a(t){e("throw",t)}c()})}}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _construct(t,e,r){return(_construct=isNativeReflectConstruct()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&_setPrototypeOf(o,r.prototype),o}).apply(null,arguments)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function system(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).message,u=void 0===t?"Only the system can invoke this command":t;return function(o,t,e){return function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=_construct(o,e);return n.authorize=function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function t(e,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$identity.isSystem()){t.next=2;break}throw new _authorizationError.default({command:e,aggregate:r,message:u});case 2:case"end":return t.stop()}},t,this)}));return function(t,e){return r.apply(this,arguments)}}(),n}}}
//# sourceMappingURL=../maps/auth/systemDecorator.js.map
