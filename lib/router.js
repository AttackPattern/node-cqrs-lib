"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=require("babel-runtime/helpers/asyncToGenerator"),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2),_koaRouter=require("koa-router"),_koaRouter2=_interopRequireDefault(_koaRouter),MessageRouter=function(e){function r(e){var t=this;(0,_classCallCheck3.default)(this,r);var a=(0,_possibleConstructorReturn3.default)(this,(r.__proto__||(0,_getPrototypeOf2.default)(r)).call(this));return a.postCreate=function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(r,n){var o,u,s;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.params.commandName,u=r.request.body,e.prev=2,e.next=5,a.handlers[o].execute(u);case 5:return s=e.sent,r.status=200,e.abrupt("return",r.body=s);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",n());case 13:case"end":return e.stop()}},e,t,[[2,10]])}));return function(r,t){return e.apply(this,arguments)}}(),a.postCommand=function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(r,n){var o,u,s,i;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.params.aggregateId,u=r.params.commandName,s=r.request.body,e.prev=3,e.next=6,a.handlers[u].execute(o,s);case 6:return i=e.sent,r.status=200,e.abrupt("return",r.body=i);case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",n());case 14:case"end":return e.stop()}},e,t,[[3,11]])}));return function(r,t){return e.apply(this,arguments)}}(),a.handlers=e,a.post("/:commandName",a.postCreate).post("/:aggregateId/:commandName",a.postCommand),a}return(0,_inherits3.default)(r,e),r}(_koaRouter2.default);exports.default=MessageRouter,module.exports=exports.default;